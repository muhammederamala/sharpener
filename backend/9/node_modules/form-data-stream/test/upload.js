var http = require('http');

http.createServer(function (req, res) {
	if (req.url == '/upload') {
		let data = ''
		req.on('data', function (chunk) {
			data += chunk;
		});
		req.on('end', function () {
			res.write('<div style="border: 1px solid red;">Uploaded!</div>');
			res.write('<pre style="border: 1px solid green;">'+data+'</pre><br>');
			_form(res);
			return res.end();
		})
	}
	else {
		_form(res);
		return res.end();
	}

}).listen(8080);

function _form(res) {
	res.writeHead(200, {'Content-Type': 'text/html'});
	let content = `
		<form action="http://localtest.speedorder.de/ar/index.php" method="post" enctype="multipart/form-data">
		<input type="text" name="input" value="test+üöälpokokasd+test"><br>
		<textarea name="text"></textarea><br>
		<input type="submit">
		</form>
	`;

	res.write(content);
}